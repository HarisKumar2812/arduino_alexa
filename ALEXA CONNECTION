import RPi.GPIO as GPIO
import time
from gpiozero import Button
import os

# Set up GPIO for clapping sensor
clap_pin = 17
GPIO.setmode(GPIO.BCM)
GPIO.setup(clap_pin, GPIO.IN)

# Set up GPIO for LED (optional)
led_pin = 18
GPIO.setup(led_pin, GPIO.OUT)

# Set up Alexa communication (assuming you have an Alexa Skill set up)
def trigger_alexa():
    os.system("your_alexa_command_here")

# Set up clapping sensor detection
claps = 0
clap_interval = 0.3  # Adjust this according to your sensor's sensitivity
clap_threshold = 3   # Adjust this according to your desired sensitivity

while True:
    if GPIO.input(clap_pin):
        claps += 1
        if claps >= clap_threshold:
            trigger_alexa()
            claps = 0
            # Optional: Blink an LED to indicate detection
            GPIO.output(led_pin, GPIO.HIGH)
            time.sleep(0.5)
            GPIO.output(led_pin, GPIO.LOW)
            time.sleep(0.5)
    else:
        time.sleep(clap_interval)
